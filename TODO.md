
**待办**

- [x] 数据处理模块
  - [x] 生成正确的时间戳。通过git。尝试优化时间戳的处理速度，不要单个文档去查询时间戳，而是查询一次所有文档的log，然后在内存中处理文档的时间戳。一次查询的历史长度太多了，导致内存爆炸。
  - [x] 引入文本分析功能，生成标签功能等关键部分。标签通过文本分析。提取到元信息头中。jieba分词和sklearn通过tfidf算法进行分词
  - [x] 自动添加封面图片。图片使用文章中的第一张图片，如果没有使用固定映射的图片，从images/cover中选取一张图片作为封面，已经准备了100张图片，按文件名哈希映射，防止不稳定的变化。提取到元信息头中。
  - [x] 增加进度条，显示文本处理的速度。
  - [x] ~~将数据处理部分直接按照hexo插件的形式开发。实现从远程仓库中下载文档，并完成数据处理的步骤。使用python专门的脚本~~
- [x] 个性化功能基础配置
  - [x] 阅读hexo官方的配置文档，完成部分个性化配置
  - [x] 阅读butterfly的配置文档，完成大部分配置。
  - [x] 阅读其他人建站的博客文章，完成全部的配置。
  - [x] 搜索功能。
  - [x] 友情链接无法显示
  - [x] 关于页面没有内容
  - [x] 文章卡片上的图片为空。
  - [TODO] ~~评论系统。暂时不做~~
  - [TODO] ~~支持个人页和文章页的打赏功能。想的太早~~
- [x] 自动化部署
  - [x] 完成构建脚本build.sh，从notes仓库中拉取文章，进行数据处理，并生成静态文件
  - [x] 完成部署脚本deploy.sh，将文章部署到github pages.
  - [x] 完成启动脚本start.sh，在本地启动hexo的静态文件服务器。
  - [x] 通过docker打包镜像。并发布到个人的镜像仓库中。
  - [x] 使用github的gitactiongs功能进行自动化的部署。每次提交后重新打包镜像。推送到docker.hub镜像仓库和gitpages，完成部署
- [x] 风格指南
  - [x] 安静、动漫卡通的小镇日常。
  - [TODO] ~~绿色的自然风格。~~
  - [TODO] ~~赛博朋克~~
  - [TODO] ~~科幻、宇宙和星辰~~
- [ ] 执行效果优化
  - [x] 批量处理git的时间戳。极大优化处理速度，避免多次触发python的执行bash命令。优化git的时间戳提取功能。现在的方案效率太低了，多次系统命令行调用和读取，严重拖慢了速度。
  - [x] 支持多种标签处理策略。引入tfidf、textrank、keybert小模型等。textrank速度和效果平衡性最好.标签生成方案优化。
  - [ ] keybert分词效果不好。
  - [ ] 标签处理过程和时间戳处理过程，添加简单的进度条。
  - [ ] 增量数据处理。实现一下增量编译的功能。每次提交一个commit和当前已经生成过的frontmatter，只重新生成其中的一部分。每次处理的时候都检查历史commit到这次commit之间变更的文件，再进行处理。
  - [ ] 标签处理过程会导致流水线内存超过显示出现错误，比较离谱
  - [x] git batch 命令仍旧会直接占用ssh缓冲区，导致断联然后强制退出。原来是AI写出了死循环！
  - [ ] 流水线多少还存在一些问题，不知道为什么打包不出来最终的镜像了，看到好像在输出最终镜像的一直卡主。优先解决这个问题
  - [x] 考虑隐藏build的镜像，还是只打包运行镜像就可，将构建镜像和运行镜像放到一个Dockerfile中。分两个阶段打包。保留现在这种打包模式不变
  - [x] 优化日志输出。中间过程有的地方输出了太多日志，有的地方没有输出日志。
  - [x] 在ghignore中忽略一下那些自己已经不再维护的目录。
- [ ] 备案
  - [x] 申请域名并进行绑定
  - [TODO] 完成域名的备案工作
  - [x] 使用CDN加速网站访问。
  - [x] 将静态网站也托管到cloudflare的pages中.
  - [x] 点亮https安全的小图标


CICI 流水线的过程
1. notes工程开发
2. build.sh构建脚本 / docker_build.sh 打包镜像到本地
3. deploy.sh将工程部署到github pages /docker_deploy.sh 推送镜像到镜像仓库
4. start.sh 启动当前的脚本。 /docker_run.sh 启动容器服务
